<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<title>Quizzer App Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
/* ===== GENERAL ===== */
* { box-sizing: border-box; margin:0; padding:0; font-family:'Montserrat',sans-serif; }
html, body { width:100%; margin:0; padding:0; }
body { background: linear-gradient(135deg,#00bcd4,#00796b); min-height:100vh; color:#333; transition: all 0.3s; position: relative; }
body.dark { background: linear-gradient(135deg,#121212,#1e1e1e); color:#fff; }

/* ===== FLOATING CIRCLES ===== */
.circle { position: fixed; border-radius: 50%; opacity: 0.1; animation: float 10s infinite ease-in-out alternate; z-index: -1; pointer-events: none; }
.circle1 { width: 200px; height: 200px; top: -50px; left: -50px; background: #fff; }
.circle2 { width: 300px; height: 300px; bottom: -100px; right: -80px; background: #000; animation-duration: 12s; }
@keyframes float { from { transform: translateY(0); } to { transform: translateY(30px); } }

/* ===== TOP NAV ===== */
.top-nav { display:flex; justify-content:space-between; align-items:center; padding:15px 30px; backdrop-filter:blur(10px); background: rgba(255,255,255,0.1); border-radius:0 0 25px 25px; box-shadow:0 10px 20px rgba(0,0,0,0.2); position:sticky; top:0; z-index:100; }
.top-nav .logo { font-weight:700; font-size:1.5em; letter-spacing:1px; background: linear-gradient(90deg,#ffd54f,#ff6f61); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
.top-nav .nav-actions { display:flex; align-items:center; gap:10px; position: relative; }
.top-nav .nav-actions i { cursor:pointer; font-size:1.3em; transition:0.3s; }
.top-nav .nav-actions i:hover { transform:scale(1.2); }
.top-nav .nav-actions .avatar { width:45px; height:45px; border-radius:50%; border:2px solid #fff; cursor:pointer; object-fit:cover; }

/* ===== WELCOME TEXT ===== */
.welcome-text { font-weight: 600; margin-right: 10px; color: #fff; display: flex; align-items: center; font-size: 1em; }
@media(max-width:768px){ .welcome-text { display: none; } }

/* ===== MAIN CONTAINER ===== */
.main-container { padding:30px; display:flex; flex-direction:column; gap:25px; position:relative; z-index:1; max-width:100vw; }

/* ===== CARD STYLES ===== */
.card { background: rgba(255,255,255,0.15); backdrop-filter:blur(15px); padding:20px; border-radius:20px; box-shadow:0 8px 25px rgba(0,0,0,0.15),0 0 15px rgba(0,188,212,0.2); transition:0.3s; position:relative; z-index:1; color:#fff; }
.card h2, .card h3, .card h4 { margin-bottom: 15px; }

/* ===== FACULTY BUTTONS ===== */
.faculty-section h4 {
    display: inline-block;
    padding: 12px 25px; /* like .btn */
    margin: 5px 10px 10px 0;
    border-radius: 25px; /* rounded like .btn */
    cursor: pointer;
    transition: transform 0.3s, opacity 0.3s;
    background: linear-gradient(45deg, #00bcd4, #00796b);
    color: #fff;
    font-weight: bold;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15), 0 0 8px rgba(0,188,212,0.3);
}
.faculty-section h4:hover {
    transform: translateY(-2px) scale(1.05);
    opacity: 0.9;
}

/* Nested programs buttons */
.nested-programs {
    display: none; /* hidden by default */
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 10px;
}
.nested-programs .btn { font-size: 0.9em; padding: 6px 10px; }

/* ===== QUICK LINKS BUTTONS ===== */
.btn { padding:12px 20px; border:none; border-radius:25px; background: linear-gradient(45deg,#00bcd4,#00796b); color:#fff; font-weight:bold; cursor:pointer; transition:0.3s; margin:5px 8px 5px 0; }
.btn:hover { transform:translateY(-2px); opacity:0.9; }
.logout-btn { background:#d62828; box-shadow:0 4px 12px rgba(0,0,0,0.15),0 0 8px rgba(214,40,40,0.3); }
.logout-btn:hover { background:#b71c1c; box-shadow:0 6px 18px rgba(0,0,0,0.2),0 0 12px rgba(214,40,40,0.4); }

/* ===== LOGOUT BUTTON UNDER TIP ===== */
.logout-container { display: flex; justify-content: flex-start; margin-top: 15px; margin-left: 10px; gap: 10px; }
@media(max-width:768px){ .nested-programs { justify-content: center; } .logout-container { justify-content: center; margin-left: 0; } }

/* ===== SIMPLE FOOTER ===== */
footer { text-align: center; padding: 20px; font-size: 14px; color: white; z-index: 1; position: relative; max-width:100vw; }
.social-icons { margin-top: 10px; }
.social-icons a { margin: 0 10px; color: white; font-size: 20px; transition: color 0.3s; text-decoration: none; }
.social-icons a:hover { color: #ffd54f; }

/* ===== LOGOUT MODAL ===== */
#logoutModal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(3px); z-index: 9999; justify-content: center; align-items: center; overflow: hidden; }
#logoutModal .modal-content { background: rgba(0, 188, 212, 0.2); backdrop-filter: blur(10px); color: rgba(255,255,255,0.7); padding: 15px 12px; border-radius: 10px; text-align: center; max-width: 220px; width: 60%; box-shadow: 0 4px 15px rgba(0,0,0,0.25), 0 0 8px rgba(0,188,212,0.3); transition: transform 0.3s ease, opacity 0.3s ease; transform: translateY(0); opacity: 1; }
#logoutModal .modal-content h3 { margin-bottom: 12px; font-size: 1em; color: rgba(255,255,255,0.7); }
#logoutModal .modal-content .modal-btns { display: flex; flex-direction: column; gap: 8px; }
#logoutModal .modal-content .modal-btns .btn { padding: 6px 10px; font-size: 0.85em; }
#logoutModal .modal-content .modal-btns .cancel-btn { background:#ccc; color:#000; }

/* ===== NOTIFICATION BOX ===== */
.notification-box { position: absolute; top: 55px; right: 10px; width: 220px; background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(10px); border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.35); display: none; flex-direction: column; padding: 8px 0; z-index: 200; opacity: 0; transform: translateY(-10px); transition: all 0.3s ease; font-size: 0.85em; }
.notification-box.show { display: flex; opacity: 1; transform: translateY(0); }
.notification-item { display: flex; align-items: flex-start; gap: 8px; padding: 10px 12px; cursor: pointer; transition: background 0.2s; }
.notification-item:hover { background: rgba(255,255,255,0.1); border-radius: 10px; }
.notification-item i { font-size: 1.1em; color: #00bcd4; flex-shrink: 0; }
.notification-text p { margin:0; font-weight:500; color:#fff; }
.notification-text span { font-size:0.7em; color: rgba(255,255,255,0.6); }

</style>
</head>
<body>

<!-- Floating Circles -->
<div class="circle circle1"></div>
<div class="circle circle2"></div>

<!-- TOP NAV -->
<div class="top-nav">
  <div class="logo">Quizzer</div>
  <div class="nav-actions">
    <span class="welcome-text">Welcome, {{ session.first_name or session.username }}</span>
    <i class="fas fa-bell"></i>
    <div id="notificationBox" class="notification-box">
      <div class="notification-item"><div class="notification-text"><p>Welcome to Quizzer!</p><span>Just now</span></div></div>
      <div class="notification-item"><div class="notification-text"><p>Play quizzes daily!</p><span>Today</span></div></div>
    </div>
    
    <i class="fas fa-moon" id="themeToggle"></i>
    <img id="profileAvatar" src="{{ url_for('static', filename='uploads/' + session['profile_pic']) if session.get('profile_pic') else 'https://cdn-icons-png.flaticon.com/512/149/149071.png' }}" alt="User Icon" class="avatar">
  </div>
</div>

<div class="main-container">

  <!-- FULL-WIDTH FACULTY CARD -->
  <div class="card faculty-card-container">
      <h2>Choose Your Faculty</h2>
      <div id="facultyProgramsContainer"></div>
  </div>

  <!-- QUICK LINKS CARD -->
  <div class="card">
    <h2>Quick Links</h2>
    <p>Explore useful features:</p>
    <button class="btn"onclick="window.location.href='randomquiz'">Take Random Quiz</button>
  </div>

  <!-- TIP CARD -->
  <div class="card">
    <h3>Tips of the Day</h3>
    <p id="dailyTip">Loading tip...</p>
  </div>

  <div class="logout-container">
    <button class="btn logout-btn" id="logoutBtn">Logout</button>
  </div>
</div>

<!-- LOGOUT MODAL -->
<div id="logoutModal">
  <div class="modal-content">
    <h3>Are you sure you want to logout?</h3>
    <div class="modal-btns">
      <button id="confirmLogout" class="btn logout-btn">Yes, Logout</button>
      <button id="cancelLogout" class="btn cancel-btn">Cancel</button>
    </div>
  </div>
</div>

<footer>
© 2025 Quizzer App. All rights reserved.
  <div class="social-icons">
    <a href="https://www.linkedin.com/in/thecodingdhami/" target="_blank"><i class="fab fa-linkedin"></i></a>
    <a href="https://x.com/thecodingdhami" target="_blank"><i class="fab fa-twitter"></i></a>
    <a href="https://github.com/thecodingdhami" target="_blank"><i class="fab fa-github"></i></a>
    <a href="https://www.youtube.com/@thecodingdhami1" target="_blank"><i class="fab fa-youtube"></i></a>
  </div>
</footer>

<script>
// ===== FACULTY PROGRAMS DATA =====
const facultyPrograms = {
    'Science & Technology': ['BE Computer', 'BCA', 'BE Civil'],
    'Management': ['BBA', 'BBS']
};

// ===== RENDER FACULTY ACCORDION =====
const container = document.getElementById('facultyProgramsContainer');

Object.keys(facultyPrograms).forEach(faculty => {
    const section = document.createElement('div');
    section.className = 'faculty-section';
    const header = document.createElement('h4');
    header.textContent = faculty;
    section.appendChild(header);

    const nestedDiv = document.createElement('div');
    nestedDiv.className = 'nested-programs';

    facultyPrograms[faculty].forEach(program => {
        const btn = document.createElement('button');
        btn.className = 'btn';
        btn.textContent = program;

        // Make buttons clickable
        btn.addEventListener('click', () => {
            const slug = program.toLowerCase().replace(/\s+/g, '');
            window.location.href = `/${slug}`;
        });

        nestedDiv.appendChild(btn);
    });

    header.addEventListener('click', () => {
        nestedDiv.style.display = nestedDiv.style.display === 'flex' ? 'none' : 'flex';
    });

    section.appendChild(nestedDiv);
    container.appendChild(section);
});

// ===== DARK MODE (Default: Dark) =====
const themeToggle = document.getElementById('themeToggle');

// Default to dark mode if no theme is set
if (!localStorage.getItem('theme')) {
    localStorage.setItem('theme', 'dark');
}

// Apply saved or default theme
if (localStorage.getItem('theme') === 'dark') {
    document.body.classList.add('dark');
} else {
    document.body.classList.remove('dark');
}

// Toggle dark/light mode manually
themeToggle.addEventListener('click', () => {
    document.body.classList.toggle('dark');
    localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
});

// ===== PROFILE CLICK =====
document.getElementById('profileAvatar').addEventListener('click', ()=>{ window.location.href='userprofile'; });

// ===== TIP OF THE DAY =====
const quotes = [
  "Be consistent - success loves discipline.",
  "Big dreams demands big sacrifices.",
  "Mistakes are proof that you are trying. Keep going!",
  "Stay consistent, your small efforts create big results.",
  "A winner is just a loser who tried one more time",
  "First they'll laugh at you,then they'll ask how you did it.",
  "Knowledge grows when you share it. Discuss with friends.",
  "Focus on progress, not perfection.",
  "Small daily improvements lead to stunning results.",
  "Don’t just memorize, understand the concepts.",
  "Quizzes are not just tests; they are practice for your brain.",
  "Every mistake is a step closer to mastery.",
  "Time invested in learning pays the best interest.",
  "Stay curious and keep asking questions.",
  "Your future self will thank you for the effort you put in today.",
  "Success is the sum of small efforts repeated daily.",
  "Learning never exhausts the mind; it energizes it.",
  "If the plan doesn't work, Change the plan, Not the goal.",
  "Doubt kills more dreams than failure ever will.",
  "Push yourself, because no one else is going to do it for you.",
  "Smart work beats hard work when done consistently.",
  "Your brain is a muscle; exercise it regularly.",
  "Every day is an opportunity to improve.",
  "Obstacles are just opportunties in disguise.",
  "Past is experience,Present is experiment, Future is expectation.",
  "Dirty water doesnot stop plants from growing,so don't let negative words stop your progress.",
  "Believe in yourself and all that you are capable of."
];
const today = new Date().toISOString().split('T')[0];
let storedTipDate = localStorage.getItem('tipDate');
let storedTipIndex = localStorage.getItem('tipIndex');
if(storedTipDate === today && storedTipIndex !== null){
    document.getElementById('dailyTip').textContent = quotes[storedTipIndex];
} else {
    const randomIndex = Math.floor(Math.random() * quotes.length);
    localStorage.setItem('tipIndex', randomIndex);
    localStorage.setItem('tipDate', today);
    document.getElementById('dailyTip').textContent = quotes[randomIndex];
}

// ===== LOGOUT MODAL =====
const logoutBtn = document.getElementById('logoutBtn');
const logoutModal = document.getElementById('logoutModal');
const confirmLogout = document.getElementById('confirmLogout');
const cancelLogout = document.getElementById('cancelLogout');
logoutBtn.addEventListener('click', () => { 
    logoutModal.style.display = 'flex'; 
});
confirmLogout.addEventListener('click', () => { 
    window.location.href = '/logout'; // call the logout route
});

cancelLogout.addEventListener('click', () => { 
    logoutModal.style.display = 'none'; 
});

// ===== NOTIFICATION DROPDOWN =====
const bellIcon = document.querySelector('.fa-bell');
const notificationBox = document.getElementById('notificationBox');
bellIcon.addEventListener('click', (e) => { 
    e.stopPropagation(); 
    notificationBox.classList.toggle('show'); 
});
document.addEventListener('click', () => { notificationBox.classList.remove('show'); });

// =====
// ===== ENTER KEY HANDLER =====
document.addEventListener('keydown', (e) => {
    if(e.key === 'Enter' || e.keyCode === 13){
        if(logoutModal.style.display === 'flex'){
            confirmLogout.click();
        } else {
            const firstBtn = document.querySelector('.nested-programs .btn');
            if(firstBtn) firstBtn.click();
        }
    }
});

// ===== PREVENT BACK AFTER LOGOUT =====
if (window.history && window.history.pushState) {
    window.history.pushState(null, null, window.location.href);
    window.onpopstate = function () {
        window.history.go(1);
    };
}
</script>
</body>
</html>


